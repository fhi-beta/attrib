<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimates simulations of expected responses — est_attrib • attrib</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimates simulations of expected responses — est_attrib" />
<meta property="og:description" content="For each exposure the dataset is copied and the original value replaced by the referance value.
Then the sim function is used to generate 500 simulations of expected responses for each row.
Finaly the dataset is transformed to obtain expected response for original and referance values
 of the given exposures for each original row of the dataset." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">attrib</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2020.7.28</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro.html">Introduction to Attrib</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimates simulations of expected responses</h1>
    
    <div class="hidden name"><code>est_attrib.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For each exposure the dataset is copied and the original value replaced by the referance value.
Then the sim function is used to generate 500 simulations of expected responses for each row.
Finaly the dataset is transformed to obtain expected response for original and referance values
 of the given exposures for each original row of the dataset.</p>
    </div>

    <pre class="usage"><span class='fu'>est_attrib</span>(<span class='no'>fit</span>, <span class='no'>data</span>, <span class='no'>exposures</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fit</th>
      <td><p>A model fit constructed by fit_attrib</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>The observed data</p></td>
    </tr>
    <tr>
      <th>exposures</th>
      <td><p>The exposures that will get reference expected mortalities</p>
<p>For more details see the help vignette:
<code>vignette("intro", package="attrib")</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Dataset with expected responses for all simulations including excpected responses given the exposure referance values</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For more details see the help vignette:
<code>vignette("intro", package="attrib")</code></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>response</span> <span class='kw'>&lt;-</span> <span class='st'>"deaths"</span>
<span class='no'>fixef</span> <span class='kw'>&lt;-</span> <span class='st'>"pr100_ili_lag_1 + sin(2 * pi * (week - 1) / 52) + cos(2 * pi * (week - 1) / 52)"</span>
<span class='no'>ranef</span> <span class='kw'>&lt;-</span> <span class='st'>" (pr100_ili_lag_1| season)"</span>
<span class='no'>offset</span> <span class='kw'>&lt;-</span> <span class='st'>"log(pop)"</span>

<span class='no'>data</span> <span class='kw'>=</span> <span class='kw pkg'>attrib</span><span class='kw ns'>::</span><span class='no'>data_fake_nation</span>

<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>fit_attrib</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data</span>, <span class='kw'>response</span> <span class='kw'>=</span> <span class='no'>response</span>, <span class='kw'>fixef</span> <span class='kw'>=</span> <span class='no'>fixef</span>, <span class='kw'>ranef</span> <span class='kw'>=</span> <span class='no'>ranef</span>, <span class='kw'>offset</span> <span class='kw'>=</span> <span class='no'>offset</span>)</div><div class='output co'>#&gt; <span class='message'>boundary (singular) fit: see ?isSingular</span></div><div class='input'><span class='no'>exposures</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>pr100_ili_lag_1</span> <span class='kw'>=</span> <span class='fl'>0</span>)
<span class='no'>new_data</span> <span class='kw'>&lt;-</span> <span class='fu'>est_attrib</span>(<span class='no'>fit</span>, <span class='no'>data</span>, <span class='no'>exposures</span>)</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |======================================================================| 100%</div><div class='input'><span class='no'>new_data</span>[]</div><div class='output co'>#&gt;         location_code week    season year    yrwk    x     pop pr100_ili
#&gt;      1:        norway    1 2009/2010 2010 2010-01 24.0 5367580 1.9293240
#&gt;      2:        norway    1 2010/2011 2011 2011-01 24.0 5367580 1.9219890
#&gt;      3:        norway    1 2011/2012 2012 2012-01 24.0 5367580 1.3976273
#&gt;      4:        norway    1 2012/2013 2013 2013-01 24.0 5367580 1.7592660
#&gt;      5:        norway    1 2013/2014 2014 2014-01 24.0 5367580 1.1564445
#&gt;     ---                                                                 
#&gt; 286996:        norway   52 2018/2019 2018 2018-52 23.0 5367580 1.4134848
#&gt; 286997:        norway   52 2019/2020 2019 2019-52 23.0 5367580 1.7789371
#&gt; 286998:        norway   52 2020/2021 2020 2020-52 23.0 5367580 0.5308053
#&gt; 286999:        norway   53 2009/2010 2009 2009-53 23.5 5367580 1.9197015
#&gt; 287000:        norway   53 2015/2016 2015 2015-53 23.5 5367580 1.8189595
#&gt;         pr100_ili_lag_1 temperature temperature_high deaths  id sim_id
#&gt;      1:       1.9197015  -3.9131137                0    942   1      1
#&gt;      2:       1.8839310   2.1005689                0    969   2      1
#&gt;      3:       1.1673965  -9.2338013                0    920   3      1
#&gt;      4:       1.5918497  -7.0780783                0    889   4      1
#&gt;      5:       0.9280684  -3.2695932                0    867   5      1
#&gt;     ---                                                               
#&gt; 286996:       1.1806417   0.9522693                0    860 570    500
#&gt; 286997:       1.6096489   7.0470121                0    918 571    500
#&gt; 286998:       0.3778115  -3.6855952                0    915 572    500
#&gt; 286999:       0.0000000   2.8811622                0    857 573    500
#&gt; 287000:       1.7563971   5.0585632                0    943 574    500
#&gt;         exp_mort_observed exp_mort_pr100_ili_lag_1=0
#&gt;      1:          918.8242                   859.2425
#&gt;      2:          950.5683                   855.0132
#&gt;      3:          933.2312                   873.8763
#&gt;      4:          869.4745                   851.1139
#&gt;      5:          882.1646                   850.5451
#&gt;     ---                                             
#&gt; 286996:          843.0222                   843.3506
#&gt; 286997:          942.8308                   875.3058
#&gt; 286998:          863.3456                   852.6389
#&gt; 286999:          881.1744                   881.1744
#&gt; 287000:          902.0270                   839.8431</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Richard White, Aurora Hofman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


